<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HBNU_DED M250 Scan Pattern Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #000000;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
        }

        .dashboard-container {
position: relative;
width: 100vw;
height: 100vh;
background: #000000;
min-width: 100vw;
min-height: 100vh;
        }

        .main-frame {
position: absolute;
width: calc(100vw - 48px);
height: calc(100vh - 50px);
left: 24px;
top: 25px;
background: #262525;
border-radius: 24px;
            overflow: hidden;
            min-width: calc(100vw - 48px);
            min-height: calc(100vh - 50px);
        }

        .glow-effect-1 {
position: absolute;
width: 118px;
height: 102px;
left: -21px;
top: -51px;
background: rgba(27, 175, 169, 0.8);
filter: blur(80px);
            border-radius: 50%;
        }

        .glow-effect-2 {
            position: absolute;
            width: 132px;
            height: 91px;
            left: -21px;
            top: 597px;
            background: rgba(175, 98, 27, 0.2);
            filter: blur(80px);
            border-radius: 50%;
        }

        .title {
position: absolute;
width: 461px;
height: 27px;
left: 97px;
top: 24px;
font-family: 'Inter';
font-style: normal;
font-weight: 900;
font-size: 24px;
line-height: 29px;
color: #FFFFFF;
        }

        .slash-button {
position: absolute;
            left: 570px;
            top: 24px;
            width: 30px;
            height: 30px;
            background: #7B20E2;
            border: 2px solid #7B20E2;
            border-radius: 6px;
            color: #FFFFFF;
            font-size: 18px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .slash-button:hover {
            background: #8B30F2;
            border-color: #8B30F2;
            transform: scale(1.1);
        }

        .slash-button:active {
            transform: scale(0.95);
        }

        .hamburger-menu {
position: absolute;
width: 21px;
height: 14px;
left: 38px;
top: 30px;
        }

        .hamburger-line {
position: absolute;
            background: #FFFFFF;
            height: 1.5px;
        }

        .hamburger-line:nth-child(1) {
width: 21px;
            top: 0;
        }

        .hamburger-line:nth-child(2) {
width: 15px;
            top: 7px;
        }

        .hamburger-line:nth-child(3) {
width: 10px;
            top: 14px;
        }

        .bottom-panel {
position: absolute;
width: 653px;
height: 125px;
left: 111px;
top: 491px;
background: #1D1D1D;
box-shadow: 0px 4px 8px 2px rgba(0, 0, 0, 0.25);
border-radius: 20px;
            padding: 15px;
            overflow-y: auto;
        }

        .right-panel {
position: absolute;
width: 399px;
height: 604px;
left: 801px;
top: 44px;
            background: #1D1D1D;
box-shadow: 0px 4px 8px 2px rgba(0, 0, 0, 0.25);
border-radius: 17px;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        .right-panel-title {
            color: #FFFFFF;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
        }

        .text-area-container {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .text-area {
            flex: 1;
            background: #262525;
            border: 2px solid #333;
            border-radius: 10px;
            padding: 15px;
            color: #FFFFFF;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            line-height: 1.5;
            resize: none;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .text-area:focus {
            border-color: #7B20E2;
        }

        .text-area::placeholder {
            color: #666;
        }

        .button-container {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .action-button {
            flex: 1;
            padding: 10px;
            background: #7B20E2;
            color: #FFFFFF;
            border: none;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-button:hover {
            background: #8B30F2;
            transform: translateY(-1px);
        }

        .action-button:active {
            transform: translateY(0px);
        }

        .clear-button {
            background: #444;
        }

        .clear-button:hover {
            background: #555;
        }

        /* Group functionality styles */
        .group-container {
            margin-top: 15px;
            padding: 15px;
            background: #262525;
            border-radius: 10px;
            border: 2px solid #333;
        }

        .group-title {
            color: #FFFFFF;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .group-button {
            width: 100%;
            padding: 8px 12px;
            background: #7B20E2;
            color: #FFFFFF;
            border: none;
            border-radius: 6px;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 8px;
        }

        .group-button:hover {
            background: #8B30F2;
        }

        .group-button:disabled {
            background: #555;
            cursor: not-allowed;
        }

        .toggle-button {
            width: 100%;
            padding: 10px 12px;
            background: #444;
            color: #FFFFFF;
            border: none;
            border-radius: 6px;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 8px;
        }

        .toggle-button:hover {
            background: #555;
        }

        .toggle-button.active {
            background: #7B20E2;
        }

        .cycles-display {
            max-height: 200px;
            overflow-y: auto;
            display: none;
            border-top: 1px solid #555;
            padding-top: 10px;
        }

        .cycles-display.show {
            display: block;
        }

        .group-item {
            display: inline-block;
            background: #7B20E2;
            color: #FFFFFF;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            border: 2px solid #7B20E2;
        }

        .group-item:hover {
            background: #8B30F2;
            border-color: #8B30F2;
        }

        .sidebar {
position: absolute;
width: 56.14px;
            height: 393.78px;
left: 44px;
top: 100px;
        }

        .sidebar-item {
            position: absolute;
            width: 56.14px;
            height: 56.14px;
background: rgba(65, 105, 225, 0.08);
border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .sidebar-item:hover {
            background: rgba(123, 32, 226, 0.15);
            transform: scale(1.05);
        }

        .sidebar-item.active {
            background: rgba(123, 32, 226, 0.3);
            border: 2px solid #7B20E2;
        }

        .sidebar-item:nth-child(1) { top: 0; }
        .sidebar-item:nth-child(2) { top: 88px; }
        .sidebar-item:nth-child(3) { top: 176px; }
        .sidebar-item:nth-child(4) { top: 264px; }
        .sidebar-item:nth-child(5) { top: 352px; }

        .sidebar-icon {
width: 28px;
height: 28px;
            border: 2px solid #A7A8AB;
            position: relative;
        }

        .sidebar-icon.active {
            border-color: #7B20E2;
        }

        /* Page content styles */
        .page-content {
            display: none;
        }

        .page-content.active {
            display: block;
        }

        /* Code assignment page styles */
        .code-assignment-container {
position: absolute;
width: 653px;
            height: 280px;
left: 135px;
top: 100px;
            background: #1D1D1D;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0px 4px 8px 2px rgba(0, 0, 0, 0.25);
        }

        .code-assignment-title {
            color: #FFFFFF;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }

        .code-input-row {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            gap: 15px;
        }

        .code-label {
            color: #FFFFFF;
            font-size: 16px;
            font-weight: 600;
            min-width: 40px;
        }

        .code-input {
            flex: 1;
            background: #262525;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 10px;
            color: #FFFFFF;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .code-input:focus {
            border-color: #7B20E2;
        }

        .save-code-button {
            background: #7B20E2;
            color: #FFFFFF;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .save-code-button:hover {
            background: #8B30F2;
        }

        /* New code assignment page styles */
        .button-list-container {
            margin-bottom: 20px;
        }

        .button-list {
            display: none;
            margin-bottom: 15px;
            padding: 10px;
            background: #262525;
            border-radius: 8px;
            border: 1px solid #555;
        }

        .button-list.show {
            display: block;
        }

        .button-item {
            display: inline-block;
            background: #333;
            color: #FFFFFF;
            padding: 8px 16px;
            margin: 5px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .button-item:hover {
            background: #444;
            border-color: #7B20E2;
        }

        .button-item.selected {
            background: #7B20E2;
            border-color: #7B20E2;
        }

        .code-input-section {
            margin-top: 20px;
        }

        .selected-button-display {
            color: #7B20E2;
            font-size: 16px;
font-weight: 600;
            margin-bottom: 10px;
            text-align: center;
            padding: 10px;
            background: #262525;
            border-radius: 8px;
            border: 2px solid #7B20E2;
        }

        .code-input-container {
display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .code-input-large {
            width: 100%;
            height: 120px;
            background: #262525;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 15px;
color: #FFFFFF;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.4;
            outline: none;
            resize: none;
            transition: border-color 0.3s ease;
        }

        .code-input-large:focus {
            border-color: #7B20E2;
        }

        .code-input-large::placeholder {
            color: #666;
        }

        .save-code-button-large {
            background: #7B20E2;
            color: #FFFFFF;
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .save-code-button-large:hover {
            background: #8B30F2;
            transform: translateY(-1px);
        }

        .save-code-button-large:active {
            transform: translateY(0px);
        }

        /* Cycle management styles */
        .cycle-list-container {
            margin-top: 20px;
        }

        .cycle-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .cycle-item {
            background: #333;
            border: 2px solid #7B20E2;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .cycle-item:hover {
            background: #3A3A3A;
            transform: translateY(-2px);
        }

        .cycle-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .cycle-name {
            color: #7B20E2;
            font-size: 16px;
font-weight: 600;
        }

        .cycle-date {
            color: #666;
            font-size: 12px;
        }

        .cycle-delete-btn {
            background: #e74c3c;
color: #FFFFFF;
            border: none;
            border-radius: 4px;
            padding: 4px 8px;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cycle-delete-btn:hover {
            background: #c0392b;
        }

        .cycle-content {
            color: #FFFFFF;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            background: #262525;
            padding: 10px;
            border-radius: 6px;
            white-space: pre-wrap;
            word-break: break-all;
        }

        .empty-cycle-message {
            color: #666;
            text-align: center;
            margin-top: 100px;
            font-size: 14px;
        }

        /* Button management styles */
        .button-management-section {
            margin-bottom: 20px;
            padding: 15px;
            background: #333;
            border-radius: 10px;
            border: 2px solid #444;
        }

        .add-list-section, .add-button-section {
            margin-bottom: 15px;
        }

        .section-title {
            color: #7B20E2;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .add-list-input, .add-button-input {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .add-list-input input, .add-button-input input, .add-button-input select {
            flex: 1;
            padding: 8px 12px;
            background: #1D1D1D;
            border: 1px solid #555;
            border-radius: 6px;
            color: #FFFFFF;
            font-family: 'Inter', sans-serif;
            font-size: 12px;
        }

        .add-list-input input:focus, .add-button-input input:focus, .add-button-input select:focus {
            outline: none;
            border-color: #7B20E2;
        }

        .add-list-input button, .add-button-input button {
            padding: 8px 12px;
            background: #7B20E2;
            color: #FFFFFF;
            border: none;
            border-radius: 6px;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .add-list-input button:hover, .add-button-input button:hover {
            background: #8B30F2;
        }

        .add-list-input button:active, .add-button-input button:active {
            transform: translateY(1px);
        }

        /* 3D Printing Code Generator styles */
        .printing-settings-section {
            margin-bottom: 20px;
            padding: 15px;
            background: #333;
            border-radius: 10px;
            border: 2px solid #444;
        }

        .settings-group {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .setting-item {
            flex: 1;
        }

        .setting-item label {
            display: block;
            color: #7B20E2;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .setting-item input {
            width: 100%;
            padding: 10px 12px;
            background: #1D1D1D;
            border: 1px solid #555;
            border-radius: 6px;
            color: #FFFFFF;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
        }

        .setting-item input:focus {
            outline: none;
            border-color: #7B20E2;
        }

        .feeder-selection {
            margin-top: 15px;
        }

        .setting-title {
            color: #7B20E2;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .feeder-options {
            display: flex;
            gap: 15px;
        }

        .feeder-option {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 8px 12px;
            background: #1D1D1D;
            border: 1px solid #555;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .feeder-option:hover {
            background: #2A2A2A;
            border-color: #7B20E2;
        }

        .feeder-option input[type="radio"] {
            margin-right: 8px;
            accent-color: #7B20E2;
        }

        .feeder-label {
            color: #FFFFFF;
            font-size: 14px;
            font-weight: 500;
        }

        .cycle-selection-section {
            margin-bottom: 20px;
            padding: 15px;
            background: #333;
            border-radius: 10px;
            border: 2px solid #444;
        }

        .cycle-dropdown select {
            width: 100%;
            padding: 10px 12px;
            background: #1D1D1D;
            border: 1px solid #555;
            border-radius: 6px;
            color: #FFFFFF;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
        }

        .cycle-dropdown select:focus {
            outline: none;
            border-color: #7B20E2;
        }

        .generate-section {
            text-align: center;
        }

        .generate-button {
            padding: 15px 30px;
            background: #7B20E2;
            color: #FFFFFF;
            border: none;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .generate-button:hover {
            background: #8B30F2;
            transform: translateY(-2px);
        }

        .generate-button:active {
            transform: translateY(0px);
        }

        .content-grid {
position: absolute;
            width: 653px;
            height: 280px;
left: 135px;
top: 100px;
        }

        .grid-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .grid-item {
width: 121px;
height: 135px;
background: #1D1D1D;
box-shadow: 0px 4px 8px 2px rgba(0, 0, 0, 0.25);
border-radius: 20px;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .grid-item:hover {
            background: #2A2A2A;
            transform: translateY(-2px);
            box-shadow: 0px 6px 12px 4px rgba(0, 0, 0, 0.3);
        }

        .grid-item:active {
            transform: translateY(0px);
        }

        .grid-item-label {
position: absolute;
            top: 15px;
font-family: 'Inter';
font-style: normal;
font-weight: 600;
font-size: 20px;
line-height: 24px;
color: #FFFFFF;
        }

        .grid-item-image {
width: 85px;
height: 85px;
            background: #333;
            border-radius: 10px;
            margin-top: 20px;
display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 12px;
        }

        /* Placeholder for images */
        .grid-item-image::before {
            content: "Image";
        }

        /* Special styling for slash button */
        .grid-item[data-item="/"] .grid-item-image::before {
            content: "";
        }

        .grid-item[data-item="/"] .grid-item-image {
            background: transparent;
            border: 2px solid #7B20E2;
            color: #7B20E2;
            font-size: 24px;
            font-weight: bold;
        }

        /* Bottom panel items */
        .bottom-item {
            display: inline-block;
            background: #333;
color: #FFFFFF;
            padding: 8px 16px;
            margin: 5px;
            border-radius: 15px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .bottom-item:hover {
            background: #444;
            border-color: #ff4444;
            transform: scale(1.05);
        }

        .bottom-item:active {
            transform: scale(0.95);
        }

        /* Empty state for bottom panel */
        .bottom-panel:empty::before {
            content: "버튼을 클릭하여 항목을 추가하세요";
            color: #666;
            font-size: 14px;
            display: block;
            text-align: center;
            margin-top: 40px;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="main-frame">
            <div class="glow-effect-1"></div>
            <div class="glow-effect-2"></div>
            
            <div class="title">HBNU_DED M250 Scan Pattern</div>
            <div class="slash-button" data-item="/">/</div>
            
            <div class="hamburger-menu">
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
            </div>

            <div class="sidebar">
                <div class="sidebar-item active" data-page="1">
                    <div class="sidebar-icon active"></div>
                </div>
                <div class="sidebar-item" data-page="2">
                    <div class="sidebar-icon"></div>
                </div>
                <div class="sidebar-item" data-page="3">
                    <div class="sidebar-icon"></div>
                </div>
                <div class="sidebar-item" data-page="4">
                    <div class="sidebar-icon"></div>
                </div>
                <div class="sidebar-item" data-page="5">
                    <div class="sidebar-icon"></div>
                </div>
            </div>

            <!-- Page 1: Main Dashboard -->
            <div class="page-content active" id="page1">
                <div class="content-grid">
                <div class="grid-row">
                    <div class="grid-item" data-item="C1">
                        <div class="grid-item-label">C1</div>
                        <div class="grid-item-image"></div>
                    </div>
                    <div class="grid-item" data-item="C2">
                        <div class="grid-item-label">C2</div>
                        <div class="grid-item-image"></div>
                    </div>
                    <div class="grid-item" data-item="C3">
                        <div class="grid-item-label">C3</div>
                        <div class="grid-item-image"></div>
                    </div>
                    <div class="grid-item" data-item="C4">
                        <div class="grid-item-label">C4</div>
                        <div class="grid-item-image"></div>
                    </div>
                </div>
                
                <div class="grid-row">
                    <div class="grid-item" data-item="F1">
                        <div class="grid-item-label">F1</div>
                        <div class="grid-item-image"></div>
                    </div>
                    <div class="grid-item" data-item="F2">
                        <div class="grid-item-label">F2</div>
                        <div class="grid-item-image"></div>
                    </div>
                    <div class="grid-item" data-item="F3">
                        <div class="grid-item-label">F3</div>
                        <div class="grid-item-image"></div>
                    </div>
                    <div class="grid-item" data-item="F4">
                        <div class="grid-item-label">F4</div>
                        <div class="grid-item-image"></div>
                    </div>
                </div>
            </div>

            <div class="bottom-panel" id="bottomPanel"></div>
            </div>

            <!-- Page 2: Code Assignment -->
            <div class="page-content" id="page2">
                <div class="code-assignment-container">
                    <div class="code-assignment-title">코드 할당</div>
                    
                    <div class="button-management-section">
                        <div class="add-list-section">
                            <div class="section-title">새 목록 추가</div>
                            <div class="add-list-input">
                                <input type="text" id="newListName" placeholder="목록 이름 (예: M, S, T...)" maxlength="10">
                                <button id="addListButton">목록 추가</button>
                            </div>
                        </div>
                        
                        <div class="add-button-section">
                            <div class="section-title">새 버튼 추가</div>
                            <div class="add-button-input">
                                <select id="buttonListSelect">
                                    <option value="">목록 선택</option>
                                </select>
                                <input type="text" id="newButtonName" placeholder="버튼 이름 (예: M1, S1...)" maxlength="10">
                                <button id="addButtonButton">버튼 추가</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="button-list-container" id="buttonListContainer">
                        <button class="toggle-button" id="toggleCButtons">C 버튼 목록</button>
                        <div class="button-list" id="cButtonList">
                            <div class="button-item" data-button="C1">C1</div>
                            <div class="button-item" data-button="C2">C2</div>
                            <div class="button-item" data-button="C3">C3</div>
                            <div class="button-item" data-button="C4">C4</div>
                        </div>
                        
                        <button class="toggle-button" id="toggleFButtons">F 버튼 목록</button>
                        <div class="button-list" id="fButtonList">
                            <div class="button-item" data-button="F1">F1</div>
                            <div class="button-item" data-button="F2">F2</div>
                            <div class="button-item" data-button="F3">F3</div>
                            <div class="button-item" data-button="F4">F4</div>
                        </div>
                    </div>
                    
                    <div class="selected-button-display" id="selectedButtonDisplay">버튼을 선택하세요</div>
                </div>
            </div>

            <!-- Page 3: Cycle Management -->
            <div class="page-content" id="page3">
                <div class="code-assignment-container">
                    <div class="code-assignment-title">사이클 관리</div>
                    
                    <div class="cycle-list-container">
                        <div class="cycle-list" id="cycleList">
                            <!-- Saved cycles will be displayed here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Page 4: 3D Printing Code Generator -->
            <div class="page-content" id="page4">
                <div class="code-assignment-container">
                    <div class="code-assignment-title">3D 프린팅 코드 생성</div>
                    
                    <div class="printing-settings-section">
                        <div class="settings-group">
                            <div class="setting-item">
                                <label for="layerThickness">Layer Thickness (mm)</label>
                                <input type="number" id="layerThickness" step="0.001" min="0.001" max="10" placeholder="0.250" value="0.250">
                            </div>
                            
                            <div class="setting-item">
                                <label for="dwellTime">Dwell Time (ms)</label>
                                <input type="number" id="dwellTime" step="100" min="0" max="10000" placeholder="3500" value="3500">
                            </div>
                            
                            <div class="setting-item">
                                <label for="target">Target (mm)</label>
                                <input type="number" id="target" step="0.1" min="0" max="1000" placeholder="5.0" value="5.0">
                            </div>
                            <div class="setting-item">
                                <label for="scanSpeed">Scan Speed</label>
                                <input type="number" id="scanSpeed" step="1" min="1" max="10000" placeholder="850" value="850">
                            </div>
                        </div>
                        
                        <div class="feeder-selection">
                            <div class="setting-title">Feeder 선택</div>
                            <div class="feeder-options">
                                <label class="feeder-option">
                                    <input type="radio" name="feeder" value="1" checked>
                                    <span class="feeder-label">Feeder 1</span>
                                </label>
                                <label class="feeder-option">
                                    <input type="radio" name="feeder" value="2">
                                    <span class="feeder-label">Feeder 2</span>
                                </label>
                                <label class="feeder-option">
                                    <input type="radio" name="feeder" value="3">
                                    <span class="feeder-label">Feeder 3</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cycle-selection-section">
                        <div class="section-title">사이클 선택</div>
                        <div class="cycle-dropdown">
                            <select id="cycleSelect">
                                <option value="">사이클을 선택하세요</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="generate-section">
                        <button id="generateCodeButton" class="generate-button">코드 파일 생성</button>
                    </div>
                </div>
            </div>

            <!-- Page 5: Placeholder -->
            <div class="page-content" id="page5">
                <div class="code-assignment-container">
                    <div class="code-assignment-title">페이지 5</div>
                    <div style="color: #FFFFFF; text-align: center; margin-top: 100px;">준비 중...</div>
                </div>
            </div>
            <div class="right-panel">
                <div class="right-panel-title">NC Code</div>
                <div class="text-area-container">
                    <textarea class="text-area" id="textArea" placeholder="여기에 NC 코드를 작성하세요..."></textarea>
                    <div class="button-container">
                        <button class="action-button" id="saveButton">사이클 저장</button>
                        <button class="action-button" id="saveCodeButton">코드 저장</button>
                        <button class="action-button clear-button" id="clearButton">지우기</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Store selected items and cycles
        let selectedItems = [];
        let savedCycles = [];
        
        // Store custom button lists and buttons
        let customButtonLists = {};
        let allButtons = ['C1', 'C2', 'C3', 'C4', 'F1', 'F2', 'F3', 'F4']; // Default buttons

        // Add click event listeners to all grid items
        document.querySelectorAll('.grid-item').forEach(item => {
            item.addEventListener('click', function() {
                const itemName = this.getAttribute('data-item');
                
                // Always add button name to bottom panel
                addToBottomPanel(itemName);
                
                // Update NC Code area based on all selected items
                updateNCCode();
            });
        });

        // Function to update NC Code area based on selected items
        function updateNCCode() {
            const textArea = document.getElementById('textArea');
            let ncCode = '';
            
            // Get codes for all selected items in order
            selectedItems.forEach(item => {
                if (buttonCodes[item.name]) {
                    if (ncCode !== '') {
                        ncCode += '\n';
                    }
                    ncCode += buttonCodes[item.name];
                }
            });
            
            textArea.value = ncCode;
            localStorage.setItem('dashboardMemo', ncCode);
        }

        // Add click event listener to slash button
        document.querySelector('.slash-button').addEventListener('click', function() {
            const itemName = this.getAttribute('data-item');
            addToBottomPanel(itemName);
        });

        // Page navigation functionality
        document.querySelectorAll('.sidebar-item').forEach(item => {
            item.addEventListener('click', function() {
                const pageNumber = this.getAttribute('data-page');
                switchPage(pageNumber);
            });
        });

        // Switch page function
        function switchPage(pageNumber) {
            // Hide all pages
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(`page${pageNumber}`).classList.add('active');
            
            // Update sidebar active state
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
                item.querySelector('.sidebar-icon').classList.remove('active');
            });
            
            document.querySelector(`[data-page="${pageNumber}"]`).classList.add('active');
            document.querySelector(`[data-page="${pageNumber}"] .sidebar-icon`).classList.add('active');
            
            // Update button visibility based on page
            updateButtonVisibility(pageNumber);
            
            // Clear text area when switching pages
            clearTextAreaForPage(pageNumber);
            
            // Update cycle list when switching to page 3
            if (pageNumber === '3') {
                updateCycleList();
            }
            
            // Update first page buttons when switching to page 1
            if (pageNumber === '1') {
                updateFirstPageButtons();
            }
            
            // Update cycle select when switching to page 4
            if (pageNumber === '4') {
                updateCycleSelect();
            }
        }

        // Update button visibility based on current page
        function updateButtonVisibility(pageNumber) {
            const saveButton = document.getElementById('saveButton');
            const saveCodeButton = document.getElementById('saveCodeButton');
            
            if (pageNumber === '1') {
                // Page 1: Show cycle save, hide code save
                saveButton.style.display = 'block';
                saveCodeButton.style.display = 'none';
            } else if (pageNumber === '2') {
                // Page 2: Hide cycle save, show code save
                saveButton.style.display = 'none';
                saveCodeButton.style.display = 'block';
            } else {
                // Other pages: Hide both buttons
                saveButton.style.display = 'none';
                saveCodeButton.style.display = 'none';
            }
        }

        // Clear text area based on page
        function clearTextAreaForPage(pageNumber) {
            const textArea = document.getElementById('textArea');
            
            if (pageNumber === '1') {
                // Page 1: Clear and show placeholder
                textArea.value = '';
                textArea.placeholder = '여기에 NC 코드를 작성하세요...';
            } else if (pageNumber === '2') {
                // Page 2: Clear and show code assignment placeholder
                textArea.value = '';
                textArea.placeholder = '선택한 버튼에 할당할 NC 코드를 입력하세요...';
            } else if (pageNumber === '3') {
                // Page 3: Clear and show cycle management placeholder
                textArea.value = '';
                textArea.placeholder = '사이클을 선택하면 코드가 표시됩니다...';
            } else {
                // Other pages: Clear and show general placeholder
                textArea.value = '';
                textArea.placeholder = 'NC Code';
            }
        }

        // Update allButtons array with custom buttons
        function updateAllButtonsArray() {
            allButtons = ['C1', 'C2', 'C3', 'C4', 'F1', 'F2', 'F3', 'F4']; // Reset to default
            
            // Add custom buttons
            Object.values(customButtonLists).forEach(buttons => {
                allButtons = allButtons.concat(buttons);
            });
        }

        // Initialize button management
        function initializeButtonManagement() {
            // Add list button functionality
            const addListButton = document.getElementById('addListButton');
            const newListName = document.getElementById('newListName');
            
            addListButton.addEventListener('click', function() {
                const listName = newListName.value.trim().toUpperCase();
                
                if (!listName) {
                    alert('목록 이름을 입력해주세요.');
                    return;
                }
                
                if (customButtonLists[listName]) {
                    alert('이미 존재하는 목록 이름입니다.');
                    return;
                }
                
                customButtonLists[listName] = [];
                localStorage.setItem('customButtonLists', JSON.stringify(customButtonLists));
                
                // Update select options
                updateButtonListSelect();
                
                // Create new button list in UI
                createButtonListUI(listName);
                
                newListName.value = '';
                alert(`목록 "${listName}"이 추가되었습니다.`);
            });
            
            // Add button functionality
            const addButtonButton = document.getElementById('addButtonButton');
            const buttonListSelect = document.getElementById('buttonListSelect');
            const newButtonName = document.getElementById('newButtonName');
            
            addButtonButton.addEventListener('click', function() {
                const selectedList = buttonListSelect.value;
                const buttonName = newButtonName.value.trim().toUpperCase();
                
                if (!selectedList) {
                    alert('목록을 선택해주세요.');
                    return;
                }
                
                if (!buttonName) {
                    alert('버튼 이름을 입력해주세요.');
                    return;
                }
                
                if (allButtons.includes(buttonName)) {
                    alert('이미 존재하는 버튼 이름입니다.');
                    return;
                }
                
                // Handle default lists (C and F)
                if (selectedList === 'C' || selectedList === 'F') {
                    // Add to customButtonLists if not exists
                    if (!customButtonLists[selectedList]) {
                        customButtonLists[selectedList] = [];
                    }
                    customButtonLists[selectedList].push(buttonName);
                    
                    // Update default buttons array
                    if (selectedList === 'C') {
                        allButtons.push(buttonName);
                    } else if (selectedList === 'F') {
                        allButtons.push(buttonName);
                    }
                } else {
                    // Handle custom lists
                    customButtonLists[selectedList].push(buttonName);
                    allButtons.push(buttonName);
                }
                
                localStorage.setItem('customButtonLists', JSON.stringify(customButtonLists));
                
                // Update UI
                updateButtonListUI(selectedList);
                updateFirstPageButtons();
                
                newButtonName.value = '';
                alert(`버튼 "${buttonName}"이 목록 "${selectedList}"에 추가되었습니다.`);
            });
            
            // Initialize select options
            updateButtonListSelect();
            
            // Create UI for existing custom lists
            Object.keys(customButtonLists).forEach(listName => {
                createButtonListUI(listName);
            });
        }

        // Update button list select options
        function updateButtonListSelect() {
            const buttonListSelect = document.getElementById('buttonListSelect');
            buttonListSelect.innerHTML = '<option value="">목록 선택</option>';
            
            // Add default lists (C and F)
            const defaultLists = [
                { name: 'C', buttons: ['C1', 'C2', 'C3', 'C4'] },
                { name: 'F', buttons: ['F1', 'F2', 'F3', 'F4'] }
            ];
            
            defaultLists.forEach(list => {
                const option = document.createElement('option');
                option.value = list.name;
                option.textContent = `${list.name} 버튼`;
                buttonListSelect.appendChild(option);
            });
            
            // Add custom lists
            Object.keys(customButtonLists).forEach(listName => {
                const option = document.createElement('option');
                option.value = listName;
                option.textContent = listName;
                buttonListSelect.appendChild(option);
            });
        }

        // Create button list UI
        function createButtonListUI(listName) {
            const container = document.getElementById('buttonListContainer');
            
            // Create toggle button
            const toggleButton = document.createElement('button');
            toggleButton.className = 'toggle-button';
            toggleButton.id = `toggle${listName}Buttons`;
            toggleButton.textContent = `${listName} 버튼 목록`;
            
            // Create button list
            const buttonList = document.createElement('div');
            buttonList.className = 'button-list';
            buttonList.id = `${listName.toLowerCase()}ButtonList`;
            
            // Add event listeners
            toggleButton.addEventListener('click', function() {
                buttonList.style.display = buttonList.style.display === 'none' ? 'block' : 'none';
                this.classList.toggle('active');
            });
            
            container.appendChild(toggleButton);
            container.appendChild(buttonList);
            
            // Add buttons to the list
            updateButtonListUI(listName);
        }

        // Update button list UI with buttons
        function updateButtonListUI(listName) {
            let buttonList;
            
            // Handle default lists (C and F)
            if (listName === 'C') {
                buttonList = document.getElementById('cButtonList');
            } else if (listName === 'F') {
                buttonList = document.getElementById('fButtonList');
            } else {
                buttonList = document.getElementById(`${listName.toLowerCase()}ButtonList`);
            }
            
            if (!buttonList) return;
            
            // Clear existing buttons (except default ones for C and F)
            if (listName === 'C' || listName === 'F') {
                const existingButtons = buttonList.querySelectorAll('.button-item');
                existingButtons.forEach(button => {
                    const buttonName = button.getAttribute('data-button');
                    // Keep default buttons (C1-C4, F1-F4)
                    if (!['C1', 'C2', 'C3', 'C4', 'F1', 'F2', 'F3', 'F4'].includes(buttonName)) {
                        button.remove();
                    }
                });
            } else {
                buttonList.innerHTML = '';
            }
            
            // Add custom buttons to the list
            if (customButtonLists[listName]) {
                customButtonLists[listName].forEach(buttonName => {
                    // Check if button already exists
                    if (!buttonList.querySelector(`[data-button="${buttonName}"]`)) {
                        const buttonItem = document.createElement('div');
                        buttonItem.className = 'button-item';
                        buttonItem.setAttribute('data-button', buttonName);
                        buttonItem.textContent = buttonName;
                        
                        buttonItem.addEventListener('click', function() {
                            // Remove selection from other buttons
                            document.querySelectorAll('.button-item').forEach(item => {
                                item.classList.remove('selected');
                            });
                            
                            // Select current button
                            this.classList.add('selected');
                            selectedButton = this.getAttribute('data-button');
                            
                            // Update display
                            document.getElementById('selectedButtonDisplay').textContent = `선택된 버튼: ${selectedButton}`;
                            
                            // Load existing code to textArea if any
                            if (buttonCodes[selectedButton]) {
                                textArea.value = buttonCodes[selectedButton];
                            } else {
                                textArea.value = '';
                            }
                        });
                        
                        buttonList.appendChild(buttonItem);
                    }
                });
            }
        }

        // Update first page buttons
        function updateFirstPageButtons() {
            const contentGrid = document.querySelector('.content-grid');
            
            // Clear existing grid items (except default C and F buttons)
            const existingItems = contentGrid.querySelectorAll('.grid-item');
            existingItems.forEach(item => {
                const itemName = item.getAttribute('data-item');
                if (!['C1', 'C2', 'C3', 'C4', 'F1', 'F2', 'F3', 'F4'].includes(itemName)) {
                    item.remove();
                }
            });
            
            // Add custom buttons to first page
            Object.values(customButtonLists).forEach(buttons => {
                buttons.forEach(buttonName => {
                    // Check if button already exists
                    if (!contentGrid.querySelector(`[data-item="${buttonName}"]`)) {
                        const gridItem = document.createElement('div');
                        gridItem.className = 'grid-item';
                        gridItem.setAttribute('data-item', buttonName);
                        
                        const label = document.createElement('div');
                        label.className = 'grid-item-label';
                        label.textContent = buttonName;
                        
                        const image = document.createElement('div');
                        image.className = 'grid-item-image';
                        
                        gridItem.appendChild(label);
                        gridItem.appendChild(image);
                        
                        // Add click event
                        gridItem.addEventListener('click', function() {
                            addToBottomPanel(buttonName);
                            updateNCCode();
                        });
                        
                        // Add visual feedback
                        gridItem.addEventListener('mousedown', function() {
                            this.style.transform = 'scale(0.95)';
                        });
                        
                        gridItem.addEventListener('mouseup', function() {
                            this.style.transform = '';
                        });
                        
                        gridItem.addEventListener('mouseleave', function() {
                            this.style.transform = '';
                        });
                        
                        contentGrid.appendChild(gridItem);
                    }
                });
            });
        }

        // Update cycle select dropdown
        function updateCycleSelect() {
            const cycleSelect = document.getElementById('cycleSelect');
            cycleSelect.innerHTML = '<option value="">사이클을 선택하세요</option>';
            
            savedCycles.forEach((cycle, index) => {
                const option = document.createElement('option');
                option.value = index;
                
                // Create display text with button summary
                let buttonSummary = '';
                if (cycle.selectedItems && cycle.selectedItems.length > 0) {
                    buttonSummary = cycle.selectedItems.map(item => item.name).join(' ');
                }
                
                option.textContent = cycle.name + (buttonSummary ? ` (${buttonSummary})` : '');
                cycleSelect.appendChild(option);
            });
        }

        // Initialize 3D printing code generation
        function initialize3DPrintingCode() {
            const generateCodeButton = document.getElementById('generateCodeButton');
            
            generateCodeButton.addEventListener('click', function() {
                generate3DPrintingCode();
            });
        }

        // Generate 3D printing code
        function generate3DPrintingCode() {
            const layerThickness = document.getElementById('layerThickness').value;
            const dwellTime = document.getElementById('dwellTime').value;
            const target = document.getElementById('target').value;
            const selectedFeeder = document.querySelector('input[name="feeder"]:checked').value;
            const selectedCycleIndex = document.getElementById('cycleSelect').value;
            
            // Validation
            if (!layerThickness || !dwellTime || !target) {
                alert('Layer Thickness, Dwell Time, Target을 모두 입력해주세요.');
                return;
            }
            
            if (selectedCycleIndex === '') {
                alert('사이클을 선택해주세요.');
                return;
            }
            
            const selectedCycle = savedCycles[selectedCycleIndex];
            if (!selectedCycle) {
                alert('선택된 사이클을 찾을 수 없습니다.');
                return;
            }
            
            // Generate code
            const generatedCode = generateCodeContent(layerThickness, dwellTime, target, selectedFeeder, selectedCycle);
            
            // Display in NC Code window
            const textArea = document.getElementById('textArea');
            textArea.value = generatedCode;
            textArea.placeholder = `생성된 3D 프린팅 코드 - ${selectedCycle.name}`;
            
            // Show success message
            const originalText = this.textContent;
            this.textContent = '코드 생성 완료!';
            this.style.background = '#27ae60';
            
            setTimeout(() => {
                this.textContent = originalText;
                this.style.background = '';
            }, 2000);
            
            console.log('3D 프린팅 코드 생성됨:', {
                layerThickness,
                dwellTime,
                target,
                feeder: selectedFeeder,
                cycle: selectedCycle.name
            });
        }

        // Generate code content
        function generateCodeContent(layerThickness, dwellTime, target, feeder, cycle) {
            // If no selectedItems, return original content
            if (!cycle.selectedItems || cycle.selectedItems.length === 0) {
                return cycle.content;
            }
            const items = cycle.selectedItems.map(item => item.name);
            // Split items by groups (using / as separator)
            const groups = [];
            let currentGroup = [];
            for (let i = 0; i < items.length; i++) {
                if (items[i] === '/') {
                    if (currentGroup.length > 0) {
                        groups.push(currentGroup);
                        currentGroup = [];
                    }
                } else {
                    currentGroup.push(items[i]);
                }
            }
            if (currentGroup.length > 0) {
                groups.push(currentGroup);
            }
            // If only one group, return original content
            if (groups.length <= 1) {
                return cycle.content;
            }
            // 반복: z=0, z+layerThickness, ... target 미만까지
            let newCode = '';
            
            // Add header codes
            newCode += 'G90\n';
            newCode += 'M50\n';
            newCode += `F${document.getElementById('scanSpeed').value}\n`;
            newCode += 'G54\n';
            newCode += 'M40\n';
            newCode += 'M60\n';
            newCode += `G4 P${dwellTime}\n`;
            newCode += '\n';
            
            const thickness = parseFloat(layerThickness);
            const targetZ = parseFloat(target);
            let z = 0;
            while (z < targetZ) {
                groups.forEach((group, groupIndex) => {
                    const zOffset = (z + groupIndex * thickness).toFixed(3);
                    group.forEach((buttonName, buttonIndex) => {
                        if (buttonCodes[buttonName]) {
                            let buttonCode = buttonCodes[buttonName];
                            const zPattern = /Z([0-9]*\.?[0-9]+)/g;
                            buttonCode = buttonCode.replace(zPattern, function(match, zValue) {
                                const newZ = (parseFloat(zValue) + parseFloat(zOffset)).toFixed(3);
                                return `Z${newZ}`;
                            });
                            
                            // 모든 G4 P를 dwellTime으로 대체
                            const g4Pattern = /G4 P[0-9]+/g;
                            buttonCode = buttonCode.replace(g4Pattern, `G4 P${dwellTime}`);
                            
                            // 각 그룹의 첫 번째 버튼일 때 중간 코드 삽입 (단, zOffset이 0이 아닐 때만)
                            if (buttonIndex === 0 && parseFloat(zOffset) !== 0) {
                                // G0 명령과 G4 P 사이에 코드 삽입
                                buttonCode = buttonCode.replace(
                                    /(G0 X[0-9.-]+ Y[0-9.-]+ Z[0-9.-]+)\n(G4 P[0-9]+)/g,
                                    `$1\nM51\nM70\nM41\nG4 P${dwellTime}\nM50\nM40\nM60\n$2`
                                );
                            }
                            
                            newCode += buttonCode + '\n';
                        } else {
                            newCode += `; ${buttonName} - No code assigned\n`;
                        }
                    });
                });
                z += thickness * groups.length;
            }
            
            // feeder에 따라 M60/M70 변환 (푸터 제외)
            let codeBody = newCode;
            if (feeder === '2') {
                codeBody = codeBody.replace(/M60/g, 'M61').replace(/M70/g, 'M71');
            } else if (feeder === '3') {
                codeBody = codeBody.replace(/M60/g, 'M62').replace(/M70/g, 'M72');
            }
            // Add footer codes (항상 고정)
            codeBody += '\n';
            codeBody += 'M70\n';
            codeBody += 'M70\n';
            codeBody += 'M71\n';
            codeBody += 'G0 X0.0 Y0.0\n';
            codeBody += `G4 P${dwellTime}\n`;
            codeBody += 'M90\n';
            codeBody += 'G53\n';
            codeBody += 'M30\n';
            
            return codeBody;
        }

        // Update cycle list display
        function updateCycleList() {
            const cycleList = document.getElementById('cycleList');
            
            if (savedCycles.length === 0) {
                cycleList.innerHTML = '<div class="empty-cycle-message">저장된 사이클이 없습니다.</div>';
                return;
            }
            
            cycleList.innerHTML = '';
            
            savedCycles.forEach((cycle, index) => {
                const cycleElement = document.createElement('div');
                cycleElement.className = 'cycle-item';
                cycleElement.style.cursor = 'pointer';
                
                const cycleHeader = document.createElement('div');
                cycleHeader.className = 'cycle-header';
                
                // Create cycle name with button summary
                const cycleName = document.createElement('div');
                cycleName.className = 'cycle-name';
                
                // Get button names from selectedItems
                let buttonSummary = '';
                if (cycle.selectedItems && cycle.selectedItems.length > 0) {
                    buttonSummary = cycle.selectedItems.map(item => item.name).join(' ');
                }
                
                cycleName.textContent = cycle.name + (buttonSummary ? ` (${buttonSummary})` : '');
                
                const cycleDate = document.createElement('div');
                cycleDate.className = 'cycle-date';
                cycleDate.textContent = cycle.date;
                
                const deleteButton = document.createElement('button');
                deleteButton.className = 'cycle-delete-btn';
                deleteButton.textContent = '삭제';
                deleteButton.addEventListener('click', function(event) {
                    event.stopPropagation(); // Prevent cycle selection when clicking delete
                    if (confirm(`사이클 "${cycle.name}"을 삭제하시겠습니까?`)) {
                        savedCycles.splice(index, 1);
                        localStorage.setItem('savedCycles', JSON.stringify(savedCycles));
                        updateCycleList();
                    }
                });
                
                cycleHeader.appendChild(cycleName);
                cycleHeader.appendChild(cycleDate);
                cycleHeader.appendChild(deleteButton);
                
                cycleElement.appendChild(cycleHeader);
                
                // Add click event to show cycle content in NC Code window
                cycleElement.addEventListener('click', function() {
                    showCycleContent(cycle);
                });
                
                cycleList.appendChild(cycleElement);
            });
        }

        // Show cycle content in NC Code window
        function showCycleContent(cycle) {
            const textArea = document.getElementById('textArea');
            textArea.value = cycle.content;
            textArea.placeholder = `사이클: ${cycle.name}`;
            
            // Add visual feedback
            const cycleItems = document.querySelectorAll('.cycle-item');
            cycleItems.forEach(item => {
                item.style.border = '2px solid #333';
                item.style.background = '#333';
            });
            
            // Highlight selected cycle
            event.currentTarget.style.border = '2px solid #7B20E2';
            event.currentTarget.style.background = '#3A3A3A';
            
            // Show success message
            const originalText = document.querySelector('.right-panel-title').textContent;
            document.querySelector('.right-panel-title').textContent = `사이클: ${cycle.name}`;
            
            // Reset title after 3 seconds
            setTimeout(() => {
                document.querySelector('.right-panel-title').textContent = originalText;
            }, 3000);
        }

        // Code assignment functionality
        const buttonCodes = {};
        let selectedButton = null;

        // Load saved codes from localStorage
        const savedCodes = localStorage.getItem('buttonCodes');
        if (savedCodes) {
            Object.assign(buttonCodes, JSON.parse(savedCodes));
        }

        // Toggle button lists
        document.getElementById('toggleCButtons').addEventListener('click', function() {
            const cList = document.getElementById('cButtonList');
            cList.classList.toggle('show');
            this.textContent = cList.classList.contains('show') ? 'C 버튼 목록 숨기기' : 'C 버튼 목록';
        });

        document.getElementById('toggleFButtons').addEventListener('click', function() {
            const fList = document.getElementById('fButtonList');
            fList.classList.toggle('show');
            this.textContent = fList.classList.contains('show') ? 'F 버튼 목록 숨기기' : 'F 버튼 목록';
        });

        // Button selection
        document.querySelectorAll('.button-item').forEach(item => {
            item.addEventListener('click', function() {
                // Remove previous selection
                document.querySelectorAll('.button-item').forEach(btn => {
                    btn.classList.remove('selected');
                });
                
                // Select current button
                this.classList.add('selected');
                selectedButton = this.getAttribute('data-button');
                
                // Update display
                document.getElementById('selectedButtonDisplay').textContent = `선택된 버튼: ${selectedButton}`;
                
                // Load existing code to textArea if any
                if (buttonCodes[selectedButton]) {
                    textArea.value = buttonCodes[selectedButton];
                } else {
                    textArea.value = '';
                }
            });
        });



        // Function to add item to bottom panel
        function addToBottomPanel(itemName) {
            const bottomPanel = document.getElementById('bottomPanel');
            
            // Create new item with unique ID
            const timestamp = Date.now();
            const uniqueId = `${itemName}_${timestamp}`;
            
            const newItem = document.createElement('div');
            newItem.className = 'bottom-item';
            newItem.setAttribute('data-item', itemName);
            newItem.setAttribute('data-id', uniqueId);
            newItem.textContent = itemName;
            
            // Add click event to remove the item
            newItem.addEventListener('click', function() {
                this.remove();
                // Remove from selectedItems array
                const index = selectedItems.findIndex(item => item.id === uniqueId);
                if (index > -1) {
                    selectedItems.splice(index, 1);
                }
                updateNCCode(); // Update NC Code when item is removed
                console.log('Selected items:', selectedItems);
            });
            
            bottomPanel.appendChild(newItem);
            selectedItems.push({ id: uniqueId, name: itemName });
            
            console.log('Selected items:', selectedItems);
        }



        // Add some visual feedback when clicking
        document.querySelectorAll('.grid-item').forEach(item => {
            item.addEventListener('mousedown', function() {
                this.style.transform = 'scale(0.95)';
            });
            
            item.addEventListener('mouseup', function() {
                this.style.transform = '';
            });
            
            item.addEventListener('mouseleave', function() {
                this.style.transform = '';
            });
        });

        // Text area functionality
        const textArea = document.getElementById('textArea');
        const saveButton = document.getElementById('saveButton');
        const clearButton = document.getElementById('clearButton');

        // Load saved text from localStorage
        const savedText = localStorage.getItem('dashboardMemo');
        if (savedText) {
            textArea.value = savedText;
        }

        // Load saved cycles from localStorage
        const savedCyclesData = localStorage.getItem('savedCycles');
        if (savedCyclesData) {
            savedCycles = JSON.parse(savedCyclesData);
        }

        // Load custom button lists from localStorage
        const customButtonListsData = localStorage.getItem('customButtonLists');
        if (customButtonListsData) {
            customButtonLists = JSON.parse(customButtonListsData);
            // Update allButtons array with custom buttons
            updateAllButtonsArray();
        }

        // Initialize button visibility for current page
        updateButtonVisibility('1');
        
        // Initialize text area for current page
        clearTextAreaForPage('1');
        
        // Initialize button management
        initializeButtonManagement();
        
        // Initialize 3D printing code generation
        initialize3DPrintingCode();

        // Save button functionality (Cycle save)
        saveButton.addEventListener('click', function() {
            const text = textArea.value.trim();
            
            if (!text) {
                alert('저장할 NC 코드가 없습니다.');
                return;
            }
            
            const cycleName = prompt('사이클 이름을 입력하세요:', `Cycle_${savedCycles.length + 1}`);
            if (!cycleName || cycleName.trim() === '') {
                alert('사이클 이름을 입력해주세요.');
                return;
            }
            
            const cycle = {
                id: Date.now(),
                name: cycleName.trim(),
                content: text,
                date: new Date().toLocaleString(),
                selectedItems: [...selectedItems] // Save the current selection
            };
            
            savedCycles.push(cycle);
            localStorage.setItem('savedCycles', JSON.stringify(savedCycles));
            
            // Show save confirmation
            const originalText = this.textContent;
            this.textContent = '사이클 저장됨!';
            this.style.background = '#27ae60';
            
            setTimeout(() => {
                this.textContent = originalText;
                this.style.background = '';
            }, 1000);
            
            console.log('사이클 저장됨:', cycle);
        });

        // Code save button functionality (for page 2)
        const saveCodeButton = document.getElementById('saveCodeButton');
        saveCodeButton.addEventListener('click', function() {
            const text = textArea.value.trim();
            
            if (!text) {
                alert('저장할 코드가 없습니다.');
                return;
            }
            
            if (!selectedButton) {
                alert('먼저 버튼을 선택해주세요.');
                return;
            }
            
            buttonCodes[selectedButton] = text;
            localStorage.setItem('buttonCodes', JSON.stringify(buttonCodes));
            
            // Show save confirmation
            const originalText = this.textContent;
            this.textContent = '코드 저장됨!';
            this.style.background = '#27ae60';
            
            setTimeout(() => {
                this.textContent = originalText;
                this.style.background = '';
            }, 1000);
            
            console.log(`코드 저장됨: ${selectedButton} -> ${text}`);
        });

        // Clear button functionality
        clearButton.addEventListener('click', function() {
            if (confirm('정말로 모든 텍스트를 지우시겠습니까?')) {
                textArea.value = '';
                localStorage.removeItem('dashboardMemo');
                
                // Show clear confirmation
                const originalText = this.textContent;
                this.textContent = '지워짐!';
                this.style.background = '#e74c3c';
                
                setTimeout(() => {
                    this.textContent = originalText;
                    this.style.background = '';
                }, 1000);
            }
        });

        // Auto-save on text change (optional)
        textArea.addEventListener('input', function() {
            // Auto-save every 5 seconds
            clearTimeout(window.autoSaveTimeout);
            window.autoSaveTimeout = setTimeout(() => {
                localStorage.setItem('dashboardMemo', this.value);
            }, 5000);
        });

        // Cycle functionality
        const createGroupButton = document.getElementById('createGroupButton');
        const clearGroupButton = document.getElementById('clearGroupButton');
        const groupDisplay = document.getElementById('groupDisplay');



        // Clear bottom panel
        function clearBottomPanel() {
            const bottomPanel = document.getElementById('bottomPanel');
            bottomPanel.innerHTML = '';
        }
    </script>
</body>
</html>
